<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 2 - Installing Istio | Istio Workshop</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/istio-workshop/favicon.ico">
    <meta name="description" content="Istio Workshop">
    <meta property="og:site_name" content="Istio Workshop">
    <meta property="og:title" content="Lab 2 - Installing Istio">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://alvsanand.github.io/istio-workshop/laboratory-02/">
    <meta property="og:image" content="https://alvsanand.github.io/istio-workshop/istio_practice_preview.png">
    <meta name="twitter:title" content="Lab 2 - Installing Istio">
    <meta name="twitter:url" content="https://alvsanand.github.io/istio-workshop/laboratory-02/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://alvsanand.github.io/istio-workshop/istio_practice_preview.png">
    
    <link rel="preload" href="/istio-workshop/assets/css/0.styles.1d818571.css" as="style"><link rel="preload" href="/istio-workshop/assets/js/app.3b9c719d.js" as="script"><link rel="preload" href="/istio-workshop/assets/js/2.0a1165e1.js" as="script"><link rel="preload" href="/istio-workshop/assets/js/12.d180dbc3.js" as="script"><link rel="prefetch" href="/istio-workshop/assets/js/10.8d9ac37f.js"><link rel="prefetch" href="/istio-workshop/assets/js/11.ae760421.js"><link rel="prefetch" href="/istio-workshop/assets/js/13.e133a97b.js"><link rel="prefetch" href="/istio-workshop/assets/js/14.484c0a8c.js"><link rel="prefetch" href="/istio-workshop/assets/js/3.15eff207.js"><link rel="prefetch" href="/istio-workshop/assets/js/4.a7535257.js"><link rel="prefetch" href="/istio-workshop/assets/js/5.d9a9b260.js"><link rel="prefetch" href="/istio-workshop/assets/js/6.59ae5067.js"><link rel="prefetch" href="/istio-workshop/assets/js/7.13dcda93.js"><link rel="prefetch" href="/istio-workshop/assets/js/8.495e0370.js"><link rel="prefetch" href="/istio-workshop/assets/js/9.1d3d0d5a.js">
    <link rel="stylesheet" href="/istio-workshop/assets/css/0.styles.1d818571.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/istio-workshop/" class="home-link router-link-active"><img src="/istio-workshop/istio_practice.png" alt="Istio Workshop" class="logo"> <span class="site-name can-hide">Istio Workshop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/istio-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="@alvsanand" class="dropdown-title"><span class="title">@alvsanand</span> <span class="arrow down"></span></button> <button type="button" aria-label="@alvsanand" class="mobile-dropdown-title"><span class="title">@alvsanand</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinekdIn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://bluetab.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bluetab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Links" class="mobile-dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://istio.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://istio.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/istio-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="@alvsanand" class="dropdown-title"><span class="title">@alvsanand</span> <span class="arrow down"></span></button> <button type="button" aria-label="@alvsanand" class="mobile-dropdown-title"><span class="title">@alvsanand</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinekdIn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://bluetab.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bluetab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Links" class="mobile-dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://istio.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://istio.io/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Istio docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/istio-workshop/" aria-current="page" class="sidebar-link">Istio Workshop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/#goals" class="sidebar-link">Goals</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/#index" class="sidebar-link">Index</a></li></ul></li><li><a href="/istio-workshop/technical_overview/" class="sidebar-link">Technical Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#what-is-istio" class="sidebar-link">What is Istio?</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#what-is-a-service-mesh" class="sidebar-link">What is a service mesh?</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#why-use-istio" class="sidebar-link">Why use Istio?</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#core-features" class="sidebar-link">Core features</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#architecture" class="sidebar-link">Architecture</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/technical_overview/#components" class="sidebar-link">Components</a></li></ul></li><li><a href="/istio-workshop/laboratory-01/" class="sidebar-link">Lab 1 - Installing Minkube</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_1-installing-minikube" class="sidebar-link">1. Installing Minikube</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_2-starting-the-cluster" class="sidebar-link">2. Starting the cluster</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_3-interacting-with-k8s" class="sidebar-link">3. Interacting with K8s</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_4-deploying-a-sample-application" class="sidebar-link">4. Deploying a sample application</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_5-deleting-minikube-cluster" class="sidebar-link">5. Deleting minikube cluster</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_6-installing-helm" class="sidebar-link">6. Installing Helm</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-01/#_7-deploying-a-simple-chart" class="sidebar-link">7. Deploying a simple Chart</a></li></ul></li><li><a href="/istio-workshop/laboratory-02/" aria-current="page" class="active sidebar-link">Lab 2 - Installing Istio</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-02/#_1-downloading-istio" class="sidebar-link">1. Downloading Istio</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-02/#_2-installing-istio-in-minikube" class="sidebar-link">2. Installing Istio in Minikube</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-02/#_3-deploying-a-sample-application" class="sidebar-link">3. Deploying a sample application</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-02/#_4-managing-istio-using-a-dashboard" class="sidebar-link">4. Managing Istio using a dashboard</a></li></ul></li><li><a href="/istio-workshop/laboratory-03/" class="sidebar-link">Lab 3 - Integrating an app</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_1-downloading-microservices-demo-application" class="sidebar-link">1. Downloading microservices-demo application</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_2-testing-microservices-demo-application-without-istio" class="sidebar-link">2. Testing microservices-demo application without Istio</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_3-injecting-istio-sidecar-into-the-application" class="sidebar-link">3. Injecting Istio sidecar into the application</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_4-sidecar-injection" class="sidebar-link">4. Sidecar injection</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_5-deploying-microservices-demo-with-istio" class="sidebar-link">5. Deploying microservices-demo with Istio</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_6-adding-external-https-connectivity-through-istio" class="sidebar-link">6. Adding external HTTPS connectivity through Istio</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_7-checking-services-using-the-istio-dashboard" class="sidebar-link">7. Checking services using the Istio dashboard</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-03/#_8-removing-resources" class="sidebar-link">8. Removing resources</a></li></ul></li><li><a href="/istio-workshop/laboratory-04/" class="sidebar-link">Lab 4 - Traffic Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_1-traffic-management" class="sidebar-link">1. Traffic Management</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_2-determining-the-application-url" class="sidebar-link">2. Determining the application URL</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_3-deploying-simple-flask-microservice" class="sidebar-link">3. Deploying simple-flask microservice</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_4-routing-requests" class="sidebar-link">4. Routing requests</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_5-circuit-breaking" class="sidebar-link">5. Circuit breaking</a></li><li class="sidebar-sub-header"><a href="/istio-workshop/laboratory-04/#_6-traffic-shifting" class="sidebar-link">6. Traffic shifting</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lab-2-installing-istio"><a href="#lab-2-installing-istio" class="header-anchor">#</a> Lab 2 - Installing Istio</h1> <p>In the second laboratory of the workshop, we will install and configure Istio as in its <a href="https://istio.io/latest/docs/setup/getting-started/" target="_blank" rel="noopener noreferrer">getting-started<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> tutorial.</p> <p>We will perform the following task:</p> <ol><li>Download Istio in your laptop.</li> <li>Install in your Minikube cluster.</li> <li>Deploy a sample application.</li> <li>Use a dashboard for Istio.</li></ol> <h2 id="_1-downloading-istio"><a href="#_1-downloading-istio" class="header-anchor">#</a> 1. Downloading Istio</h2> <ol><li><p>Execute Istio downloader:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">curl</span> -L https://istio.io/downloadIstio <span class="token operator">|</span> <span class="token assign-left variable">ISTIO_VERSION</span><span class="token operator">=</span><span class="token number">1.8</span>.1 <span class="token function">sh</span> -
</code></pre></div></li> <li><p>Move to the Istio package directory:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> istio-1.8.1
</code></pre></div></li> <li><p>Add the <code>istioctl</code> client to your path (Linux or macOS):</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PWD</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre></div></li></ol> <h2 id="_2-installing-istio-in-minikube"><a href="#_2-installing-istio-in-minikube" class="header-anchor">#</a> 2. Installing Istio in Minikube</h2> <ol><li><p>For this installation, we use the <code>demo</code> <a href="https://istio.io/latestdocs/setup/additional-setup/config-profiles/" target="_blank" rel="noopener noreferrer">configuration profile<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>istioctl <span class="token function">install</span> --set <span class="token assign-left variable">profile</span><span class="token operator">=</span>demo
</code></pre></div></li> <li><p>(Optional) Add a namespace label to instruct Istio to automatically inject Envoy sidecar proxies when you deploy your application later:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl label namespace default istio-injection<span class="token operator">=</span>enabled
</code></pre></div></li></ol> <h2 id="_3-deploying-a-sample-application"><a href="#_3-deploying-a-sample-application" class="header-anchor">#</a> 3. Deploying a sample application</h2> <ol><li><p>Deploy the <a href="https://istio.io/latest/docs/examples/bookinfo/" target="_blank" rel="noopener noreferrer">Bookinfo sample application<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml
</code></pre></div></li> <li><p>The application will start. As each pod becomes ready, the Istio sidecar will deploy along with it.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl get services
</code></pre></div><p>and</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl get pods
</code></pre></div></li> <li><p>Verify everything is working correctly up to this point. Run this command to see if the app is running inside the cluster and serving HTML pages by     checking for the page title in the response:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl <span class="token builtin class-name">exec</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>kubectl get pod -l <span class="token assign-left variable">app</span><span class="token operator">=</span>ratings -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.items[0].metadata.name}'</span><span class="token variable">)</span></span>&quot;</span> -c ratings -- <span class="token function">curl</span> -s productpage:9080/productpage <span class="token operator">|</span> <span class="token function">grep</span> -o <span class="token string">&quot;&lt;title&gt;.*&lt;/title&gt;&quot;</span>
</code></pre></div></li></ol> <h3 id="_3-1-opening-sample-application-to-outside-traffic"><a href="#_3-1-opening-sample-application-to-outside-traffic" class="header-anchor">#</a> 3.1 Opening sample application to outside traffic</h3> <p>The Bookinfo application is deployed but not accessible from the outside. To make it accessible, you need to create an <a href="https://istio.io/latestdocs/concepts/traffic-management/#gateways" target="_blank" rel="noopener noreferrer">Istio Ingress Gateway<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which maps a path to a route at the edge of your mesh.</p> <ol><li><p>Associate this application with the Istio gateway:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml
</code></pre></div></li> <li><p>Ensure that there are no issues with the configuration:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>istioctl analyze
</code></pre></div></li></ol> <h3 id="_3-2-determining-the-ingress-ip-and-ports"><a href="#_3-2-determining-the-ingress-ip-and-ports" class="header-anchor">#</a> 3.2 Determining the ingress IP and ports</h3> <p>Follow these instructions to set the <code>INGRESS_HOST</code> and <code>INGRESS_PORT</code> variables for accessing the gateway. Use the tabs to choose the instructions for your chosen platform:</p> <ol><li><p>Set the ingress ports:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">INGRESS_PORT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl -n istio-system get <span class="token function">service</span> istio-ingressgateway -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.spec.ports[?(.name==&quot;http2&quot;)].nodePort}'</span><span class="token variable">)</span></span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">SECURE_INGRESS_PORT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl -n istio-system get <span class="token function">service</span> istio-ingressgateway -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.spec.ports[?(.name==&quot;https&quot;)].nodePort}'</span><span class="token variable">)</span></span>
</code></pre></div></li> <li><p>Ensure a port was successfully assigned to each environment variable:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INGRESS_PORT</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SECURE_INGRESS_PORT</span>&quot;</span>
</code></pre></div></li> <li><p>Set the ingress IP:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">INGRESS_HOST</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>minikube <span class="token function">ip</span><span class="token variable">)</span></span>
</code></pre></div></li> <li><p>Ensure an IP address was successfully assigned to the environment variable:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$INGRESS_HOST</span>&quot;</span>
</code></pre></div></li> <li><p>Run this command in a <strong>new terminal window</strong> to start a Minikube tunnel that sends traffic to your Istio Ingress Gateway:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>minikube tunnel
</code></pre></div></li> <li><p>Set <code>GATEWAY_URL</code>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">GATEWAY_URL</span><span class="token operator">=</span><span class="token variable">$INGRESS_HOST</span><span class="token builtin class-name">:</span><span class="token variable">$INGRESS_PORT</span>
</code></pre></div></li> <li><p>Run the following command to retrieve the external address of the Bookinfo application.</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> http://<span class="token string">&quot;<span class="token variable">$GATEWAY_URL</span>/productpage&quot;</span>
</code></pre></div></li> <li><p>Paste the output from the previous command into your web browser and confirm that the Bookinfo product page is displayed.</p></li></ol> <h2 id="_4-managing-istio-using-a-dashboard"><a href="#_4-managing-istio-using-a-dashboard" class="header-anchor">#</a> 4. Managing Istio using a dashboard</h2> <p>Istio has several optional dashboards installed by the demo installation. The <a href="https://kiali.io/" target="_blank" rel="noopener noreferrer">Kiali<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> dashboard helps you understand the structure of your service mesh by displaying the topology and indicates the health of your mesh.</p> <ol><li><p>Install <code>Kiali</code> and the other addons and wait for them to be deployed.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>kubectl apply -f samples/addons
kubectl rollout status deployment/kiali -n istio-system
</code></pre></div></li> <li><p>Access the Kiali dashboard. The default user name is <code>admin</code> and default password is <code>admin</code>.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>istioctl dashboard kiali
</code></pre></div></li> <li><p>In the left navigation menu, select <em>Graph</em> and in the <em>Namespace</em> drop down, select <em>default</em>.</p> <p>The Kiali dashboard shows an overview of your mesh with the relationships between the services in the <code>Bookinfo</code> sample application. It also provides filters to visualize the traffic flow.</p> <p><img src="https://istio.io/latest/docs/setup/getting-started/kiali-example2.png" alt="Kiali Dashboard"></p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/istio-workshop/laboratory-01/" class="prev">
        Lab 1 - Installing Minkube
      </a></span> <span class="next"><a href="/istio-workshop/laboratory-03/">
        Lab 3 - Integrating an app
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/istio-workshop/assets/js/app.3b9c719d.js" defer></script><script src="/istio-workshop/assets/js/2.0a1165e1.js" defer></script><script src="/istio-workshop/assets/js/12.d180dbc3.js" defer></script>
  </body>
</html>
