(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{377:function(e,a,t){"use strict";t.r(a);var s=t(8),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"lab-1-installing-minkube"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lab-1-installing-minkube"}},[e._v("#")]),e._v(" Lab 1 - Installing Minkube")]),e._v(" "),t("p",[e._v("The first laboratory of the workshop consist of launching a Kubernetes cluster in our local machine. In order to achieve that, we will use "),t("a",{attrs:{href:"https://kubernetes.io/docs/tutorials/hello-minikube/",target:"_blank",rel:"noopener noreferrer"}},[e._v("minikube"),t("OutboundLink")],1),e._v(" that eases a lot this task.")]),e._v(" "),t("p",[e._v("We will perform the following task:")]),e._v(" "),t("ol",[t("li",[e._v("Install and run a Minikube cluster in your laptop.")]),e._v(" "),t("li",[e._v("Use "),t("code",[e._v("kubectl")]),e._v(" while deploying a sample application.")]),e._v(" "),t("li",[e._v("Deploy a sample application.")]),e._v(" "),t("li",[e._v("Install and use Helm.")])]),e._v(" "),t("h3",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("ul",[t("li",[e._v("2 CPUs or more")]),e._v(" "),t("li",[e._v("8GB of free memory")]),e._v(" "),t("li",[e._v("40GB of free disk space")]),e._v(" "),t("li",[e._v("Internet connection")]),e._v(" "),t("li",[e._v("Container or virtual machine manager, such as: "),t("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h2",{attrs:{id:"_1-installing-minikube"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-installing-minikube"}},[e._v("#")]),e._v(" 1. Installing Minikube")]),e._v(" "),t("p",[e._v("Depending of your OS, you will have different options for installing Minikube.")]),e._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux"}},[t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mv")]),e._v(" minikube-linux-amd64 /usr/local/bin/minikube\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" a+x /usr/local/bin/minikube\n")])])])]),e._v(" "),t("Tab",{attrs:{label:"MacOs"}},[t("p",[e._v("If the "),t("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Brew Package Manager"),t("OutboundLink")],1),e._v(" installed:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("brew "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" minikube\n")])])]),t("p",[e._v("If "),t("code",[e._v("which minikube")]),e._v(" fails after installation via brew, you may have to remove the minikube cask and link the binary:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("brew cask remove minikube\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("link")]),e._v(" minikube\n")])])]),t("p",[e._v("Otherwise, download minikube directly:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" minikube-darwin-amd64 /usr/local/bin/minikube\n")])])])]),e._v(" "),t("Tab",{attrs:{label:"Windows"}},[t("p",[e._v("If the "),t("a",{attrs:{href:"https://chocolatey.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chocolatey Package Manager"),t("OutboundLink")],1),e._v(" is installed, use it to install minikube:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("choco "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" minikube\n")])])]),t("p",[e._v("Otherwise, download and run the "),t("a",{attrs:{href:"https://storage.googleapis.com/minikube/releases/latest/minikube-installer.exe",target:"_blank",rel:"noopener noreferrer"}},[e._v("Windows installer"),t("OutboundLink")],1)])])],1),e._v(" "),t("h2",{attrs:{id:"_2-starting-the-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-starting-the-cluster"}},[e._v("#")]),e._v(" 2. Starting the cluster")]),e._v(" "),t("p",[e._v("From a terminal with administrator access (but not logged in as root), run:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("minikube start --cpus "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" --memory "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8192")]),e._v(" --disk-size 40g\n")])])]),t("h2",{attrs:{id:"_3-interacting-with-k8s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-interacting-with-k8s"}},[e._v("#")]),e._v(" 3. Interacting with K8s")]),e._v(" "),t("p",[e._v("If you already have kubectl installed, you can now use it to access your shiny new cluster:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("kubectl config use-context minikube\nkubectl get po -A\n")])])]),t("p",[e._v("Alternatively, minikube can download the appropriate version of kubectl, if you don't mind to use an alias in the command-line:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("alias")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("kubectl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"minikube kubectl --"')]),e._v("\nkubectl get po -A\n")])])]),t("p",[e._v("minikube bundles the Kubernetes Dashboard, allowing you to get easily acclimated to your new environment:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("minikube dashboard\n")])])]),t("h2",{attrs:{id:"_4-deploying-a-sample-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-deploying-a-sample-application"}},[e._v("#")]),e._v(" 4. Deploying a sample application")]),e._v(" "),t("p",[e._v("Create a sample deployment and expose it on port 8080:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("kubectl create deployment hello-minikube --image"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("k8s.gcr.io/echoserver:1.4\nkubectl expose deployment hello-minikube --type"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("NodePort --port"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8080")]),e._v("\n")])])]),t("p",[e._v("It may take a moment, but your deployment will soon show up when you run:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("kubectl get services hello-minikube\n")])])]),t("p",[e._v("The easiest way to access this service is to let minikube launch a web browser for you:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("minikube "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" hello-minikube\n")])])]),t("p",[e._v("Alternatively, use kubectl to forward the port:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("kubectl port-forward service/hello-minikube "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("7080")]),e._v(":8080\n")])])]),t("p",[e._v("Now, the application is available at "),t("a",{attrs:{href:"http://localhost:7080/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:7080/"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"_5-deleting-minikube-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-deleting-minikube-cluster"}},[e._v("#")]),e._v(" 5. Deleting minikube cluster")]),e._v(" "),t("blockquote",[t("p",[e._v("For now, we will not execute this command.")])]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("minikube delete --all\n")])])]),t("h2",{attrs:{id:"_6-installing-helm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-installing-helm"}},[e._v("#")]),e._v(" 6. Installing Helm")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n\nhelm repo "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" stable https://charts.helm.sh/stable\n")])])]),t("h2",{attrs:{id:"_7-deploying-a-simple-chart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-deploying-a-simple-chart"}},[e._v("#")]),e._v(" 7. Deploying a simple Chart")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Deploy a MySQL server:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("helm repo update\nhelm "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" my-mysql stable/mysql\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Check its status:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("helm status my-mysql\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Delete the chart:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("helm uninstall my-mysql\n")])])])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);